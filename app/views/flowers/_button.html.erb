<%# app/views/flowers/_button.html.erb %>

<%# ðŸŒ¸ FlowerçŠ¶æ…‹ã‚’DBã‹ã‚‰ç›´æŽ¥ç¢ºèªï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ä½¿ã‚ãªã„ï¼‰ %>
<% flowered = user_signed_in? && Flower.exists?(user: current_user, flowerable: flowerable) %>

<%# ðŸŒ¸ URLã‚’å¯¾è±¡ã«ã‚ˆã£ã¦åˆ†å² %>
<% url = if flowerable.is_a?(Comment)
            post_comment_flower_path(flowerable.post, flowerable)
          else
            post_flower_path(flowerable)
          end %>

<%= form_with url: url,
              method: flowered ? :delete : :post,
              data: { turbo_stream: true },
              class: "flex items-center space-x-1" do %>

  <button type="submit"
          class="action-icon flower-btn text-2xl leading-none
                 <%= flowered ? 'text-pink-500 hover:text-pink-700' : 'text-gray-400 hover:text-pink-500' %>">
    <span class="flower-icon"><%= flowered ? "ðŸŒ¿" : "ðŸŒ±" %></span>
    <span class="flower-count text-gray-600 text-sm font-semibold ml-1">
      <%= flowerable.flowers.count %>
    </span>
  </button>

<% end %>
