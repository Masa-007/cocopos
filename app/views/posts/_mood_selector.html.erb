<!-- ğŸŒˆ æ°—åˆ†é¸æŠï¼ˆå¿ƒã®æ•´ç†ç®±å°‚ç”¨ï¼‰ -->
<div id="moodSection" class="mb-8 relative z-10 <%= post.organize? ? "" : "hidden" %>">
  <label class="block text-lg font-bold text-gray-800 mb-4">ğŸ˜Š ä»Šã®æ°—åˆ†ã‚’é¸ã‚“ã§ãã ã•ã„</label>

  <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
    <% Post::MOODS.each do |key, info| %>
      <% emoji = info[:label][/^\S+/] %>
      <% text  = info[:label].sub(/^\S+\s*/, "") %>

      <label class="relative cursor-pointer select-none">
        <%= f.radio_button :mood, key,
              checked: post.mood == key.to_s,
              class: "absolute inset-0 opacity-0 cursor-pointer peer z-20" %>

        <div class="p-4 text-center border-2 border-gray-200 rounded-xl bg-white
                    transition-all peer-checked:border-purple-400 peer-checked:ring-2 peer-checked:ring-purple-200">
          <span class="text-2xl"><%= emoji %></span>
          <p class="text-sm text-gray-700 mt-1 font-medium"><%= text %></p>
        </div>
      </label>
    <% end %>
  </div>

  <p class="text-sm text-gray-500 mt-2">â€» å¿ƒã®æ•´ç†ç®±ã§ã¯æ°—åˆ†ã®é¸æŠãŒå¿…é ˆã§ã™</p>
</div>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const radios = document.querySelectorAll(".post-type-radio");
    const moodSection = document.getElementById("moodSection");

    if (!radios.length) return;

    // new ã®ã¨ãã®ã¿å‹•ä½œ
    function toggleMoodSection() {
      const selected = document.querySelector(".post-type-radio:checked")?.value;
      if (selected === "organize") {
        moodSection.classList.remove("hidden");
      } else {
        moodSection.classList.add("hidden");
      }
    }

    radios.forEach(radio => {
      radio.addEventListener("change", toggleMoodSection);
    });

    toggleMoodSection();
  });
</script>
