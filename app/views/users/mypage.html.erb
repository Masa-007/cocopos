<main class="flex-grow pt-20 pb-16 relative z-10 font-['Zen_Maru_Gothic']">
  <div id="season-wrapper" class="<%= @season %> relative">

    <div class="petal-layer pointer-events-none absolute inset-0 overflow-hidden">
      <% [10, 25, 40, 60, 80].each_with_index do |left, i| %>
        <div class="petal" style="left:<%= left %>%; animation-delay:<%= i %>s;"></div>
      <% end %>
    </div>

    <div class="container mx-auto max-w-6xl px-6 text-center relative z-10">
      <h1 class="mypage-title mb-2">
        <%= { "spring" => "🌸", "summer" => "🌻", "autumn" => "🍁", "winter" => "❄️" }[@season] %> マイページ
      </h1>
      <p class="mypage-subtitle mb-8">あなたの心の記録を花のように咲かせよう</p>

      <div class="text-center mb-10">
        <%= link_to "次の季節のデザインを見てみる 🌈",
          mypage_path(season: next_season(@season), year: @year, month: @month),
          class: "inline-block px-5 py-2 text-sm text-white font-semibold rounded-full
                  bg-gradient-to-r from-pink-500 via-orange-400 to-yellow-400
                  shadow-md hover:scale-105 hover:brightness-110 transition-all duration-300" %>
      </div>

       <div class="mypage-actions grid grid-cols-1 md:grid-cols-2 gap-6 mb-12 mx-auto md:max-w-4xl">
        <%= link_to new_post_path, class: "action-btn green block" do %>
          <div class="action-content flex flex-col items-center text-center">
            <div class="action-icon">✏️</div>
            <h3>投稿を作成する</h3>
            <p>新しい気持ちを投函しよう</p>
            <span>今すぐ投函 →</span>
          </div>
        <% end %>

        <%= link_to edit_user_registration_path, class: "action-btn gray block" do %>
          <div class="action-content flex flex-col items-center text-center">
            <div class="action-icon">⚙️</div>
            <h3>設定を変更する</h3>
            <p>アカウント設定を管理</p>
            <span>設定へ→</span>
          </div>
        <% end %>

        <%= link_to mypage_posts_path, class: "action-btn blue block" do %>
          <div class="action-content flex flex-col items-center text-center">
            <div class="action-icon">📖</div>
            <h3>自分の投稿</h3>
            <p>これまでに書いた投稿を見る</p>
            <span>振り返る →</span>
          </div>
        <% end %>

        <%= link_to mypage_records_path(year: @year, month: @month, season: @season),
                    class: "action-btn blue block" do %>
          <div class="action-content flex flex-col items-center text-center">
            <div class="action-icon">🗂️</div>
            <h3>これまでの記録</h3>
            <p>TODOや気分の変化を見る</p>
            <span>記録を見る →</span>
          </div>
        <% end %>
      </div>

      <turbo-frame id="mypage-frame">
        <div class="flower-frame mx-auto my-10 md:max-w-5xl">
          <%= render "calendar",
                year: @year,
                month: @month,
                first_day: @first_day,
                dates: @dates,
                season: @season,
                posts_by_date: @posts_by_date %>
        </div>
      </turbo-frame>
    </div>
  </div>
</main>
