<!-- 🌱 未来宣言箱（TODO / 進捗 / 期限） -->
<div class="bg-white rounded-3xl shadow-lg p-8 mb-14">
  <div class="flex flex-col gap-2 md:flex-row md:items-end md:justify-between mb-4">
    <h2 class="text-2xl font-bold text-gray-800">🌱 未来宣言箱のTODOメモ</h2>
    <p class="text-sm text-gray-500">タイトル・進捗・期限を月ごとに一覧で確認できます。</p>
  </div>

  <p class="text-sm text-gray-500 mb-4"><%= future_insight %></p>

  <% if future_posts.present? %>
    <div class="space-y-4">
      <% future_posts.each do |post| %>
        <div class="rounded-2xl border border-green-100 bg-green-50/40 p-4">
          <div class="flex flex-col gap-3 md:flex-row md:items-center md:justify-between">
            <div class="text-left">
              <p class="text-xs text-green-700 font-semibold">TODO</p>
              <h3 class="text-lg font-bold text-gray-800 break-words">
                <%= link_to(post.title.presence || "タイトル未設定", post_path(post, from: "mypage"),
                            class: "hover:underline") %>
              </h3>
              <p class="text-xs text-gray-500 mt-1">
                <%= l post.created_at, format: :short %> 投函
              </p>
            </div>

            <div class="flex flex-col gap-3 text-sm text-gray-700 md:min-w-[220px]">
              <div class="flex items-center justify-between gap-2">
                <span class="inline-flex items-center gap-1 rounded-full bg-white px-3 py-1 shadow-sm">
                  🎯 進捗
                  <strong>
                    <%= post.progress.present? ? "#{post.progress}%" : "未設定" %>
                  </strong>
                </span>
                <span class="inline-flex items-center gap-1 rounded-full bg-white px-3 py-1 shadow-sm">
                  📅 期限
                  <strong>
                    <%= post.deadline.present? ? l(post.deadline, format: :short) : "未設定" %>
                  </strong>
                </span>
              </div>

              <div class="h-2 w-full rounded-full bg-white/70 shadow-inner">
                <div class="h-full rounded-full bg-green-400"
                     style="width: <%= post.progress.present? ? post.progress : 0 %>%;">
                </div>
              </div>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <p class="text-gray-500">この月には未来宣言箱の投稿がありません。</p>
  <% end %>
</div>
